<HTML>
<TITLE>From the single platform up</TITLE>
<BODY>
<PRE>
$Id: master.html,v 1.3 1997/07/15 00:07:44 ksb Exp $
</PRE>

<H1>Starting from the middle</H1>
If we were to compare the Makefiles from two UNIX platforms
we might find a very small list of differences.
For example we would surely find that the -D<I>type</I>
in the CDEFS macro was different (because it is by design).
Another place we might find a difference is the loader library
options (-lcurses vs -lterminfo) to support the terminal input/output
available on the platform.


<H2>Looking at a <A name="macro">Makefile</A> in a new light</H2>
<P>
If we could contain those differences to a few lines we could use
a macro processor (like m4 or cpp) to unify all platform Makefiles
into a common "master" Makefile.
In fact we do just that with m4 and call that master makefile "Make.host".
See <A href="m4.html">m4 usage</A> for a complete description of the
m4 culture we need.


<H2><A name="distrib">Moving data</A> from a central machine to the platform</H2>
The generic rdist(1) utility from Berkeley (shipped with 4.3BSD)
transmits file from a central host to client platforms quite
well.
To enhance it to meet our needs we make three additions.
<H3>A list of hosts which have source</H3>
<H3>A trip though m4, our favorite processor</H3>
<H3>Optional trips through m4 for our friends</H3>

<H2>A new <A name="makefile">Makefile</A> to control this process</H2>
<P>
The original "Makefile" is now "Make.host" so a new make(1) control
file is constructed to oversee the distribution and construction process.

<H2>A new look at <A name="rcs">RCS</A></H2>
The master source directory is really the best place to keep our source.

<H2>Local <A name="levers">Leverage</A></H2>
There are some parts of the leverage we've build but not used.
Either they only appear on the command line, or they have just
not come up yet.


<H3>The ${INTO} macro we pass to rdist</H3>

<H3>The HOSTS options to distrib</H3>

<H3>Additional macros in distrib.cf</H3>

<HR>
<A href="meta.html">Next Page</A></H2>
</BODY>
</HTML>
